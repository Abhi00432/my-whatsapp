<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Private Chat</title>
<link rel="stylesheet" href="style.css">
</head>
<body class="chat-body">

<div class="chat-container">

  <div class="chat-header">
    <img id="mydp">
    <span id="myname"></span>
    <small class="status">Online</small>
  </div>

  <div id="messages" class="chat-box"></div>

  <div class="chat-input">
    <input type="text" id="msg" placeholder="Type a message">
    <button onclick="sendMsg()">âž¤</button>
  </div>

</div>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const name = localStorage.getItem("username");
const dp = localStorage.getItem("dp");

document.getElementById("myname").innerText = name;
document.getElementById("mydp").src = dp || "https://i.imgur.com/6VBx3io.png";

function sendMsg(){
  const msg = document.getElementById("msg").value;
  if(!msg) return;
  socket.emit("chat", { name, msg, dp });
  document.getElementById("msg").value = "";
}

socket.on("chat", data => {
  const div = document.createElement("div");
  div.className = data.name === name ? "msg me" : "msg other";
  div.innerHTML = `<b>${data.name}</b><br>${data.msg}`;
  document.getElementById("messages").appendChild(div);
});
</script>

</body>
</html>
