<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const name = localStorage.getItem("name");

if (!name) location.href = "join.html";

// âœ… JOIN ONLY HERE
socket.emit("join", name);

socket.on("users", users => {
  list.innerHTML = "";
  users.forEach(u => {
    if (u !== name) {
      list.innerHTML += `
        <div class="user" onclick="openChat('${u}')">${u}</div>
      `;
    }
  });
});

function openChat(u) {
  localStorage.setItem("toName", u);
  location.href = "chat.html";
}
</script>
<div>
  <h2>Welcome, <span id="username"></span></h2>
  <h3>Online Users:</h3>
  <div id="list"></div> 